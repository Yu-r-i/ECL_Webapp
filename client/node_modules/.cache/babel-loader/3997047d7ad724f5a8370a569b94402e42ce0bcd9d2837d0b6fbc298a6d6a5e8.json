{"ast":null,"code":"import { useDrop } from \"react-dnd\";\nimport { useTreeApi } from \"../context\";\nimport { computeDrop } from \"./compute-drop\";\nimport { actions as dnd } from \"../state/dnd-slice\";\nimport { safeRun } from \"../utils\";\nimport { ROOT_ID } from \"../data/create-root\";\nexport function useDropHook(el, node) {\n  const tree = useTreeApi();\n  const [_, dropRef] = useDrop(() => ({\n    accept: \"NODE\",\n    canDrop: () => tree.canDrop(),\n    hover: (_item, m) => {\n      const offset = m.getClientOffset();\n      if (!el.current || !offset) return;\n      const {\n        cursor,\n        drop\n      } = computeDrop({\n        element: el.current,\n        offset: offset,\n        indent: tree.indent,\n        node: node,\n        prevNode: node.prev,\n        nextNode: node.next\n      });\n      if (drop) tree.dispatch(dnd.hovering(drop.parentId, drop.index));\n      if (m.canDrop()) {\n        if (cursor) tree.showCursor(cursor);\n      } else {\n        tree.hideCursor();\n      }\n    },\n    drop: (_, m) => {\n      if (!m.canDrop()) return null;\n      let {\n        parentId,\n        index,\n        dragIds\n      } = tree.state.dnd;\n      safeRun(tree.props.onMove, {\n        dragIds,\n        parentId: parentId === ROOT_ID ? null : parentId,\n        index: index === null ? 0 : index,\n        // When it's null it was dropped over a folder\n        dragNodes: tree.dragNodes,\n        parentNode: tree.get(parentId)\n      });\n      tree.open(parentId);\n    }\n  }), [node, el.current, tree.props]);\n  return dropRef;\n}","map":{"version":3,"names":["useDrop","useTreeApi","computeDrop","actions","dnd","safeRun","ROOT_ID","useDropHook","el","node","tree","_","dropRef","accept","canDrop","hover","_item","m","offset","getClientOffset","current","cursor","drop","element","indent","prevNode","prev","nextNode","next","dispatch","hovering","parentId","index","showCursor","hideCursor","dragIds","state","props","onMove","dragNodes","parentNode","get","open"],"sources":["/Users/yuri/GitHub/ECL_Website/root/seminar/client/node_modules/react-arborist/dist/module/dnd/drop-hook.js"],"sourcesContent":["import { useDrop } from \"react-dnd\";\nimport { useTreeApi } from \"../context\";\nimport { computeDrop } from \"./compute-drop\";\nimport { actions as dnd } from \"../state/dnd-slice\";\nimport { safeRun } from \"../utils\";\nimport { ROOT_ID } from \"../data/create-root\";\nexport function useDropHook(el, node) {\n    const tree = useTreeApi();\n    const [_, dropRef] = useDrop(() => ({\n        accept: \"NODE\",\n        canDrop: () => tree.canDrop(),\n        hover: (_item, m) => {\n            const offset = m.getClientOffset();\n            if (!el.current || !offset)\n                return;\n            const { cursor, drop } = computeDrop({\n                element: el.current,\n                offset: offset,\n                indent: tree.indent,\n                node: node,\n                prevNode: node.prev,\n                nextNode: node.next,\n            });\n            if (drop)\n                tree.dispatch(dnd.hovering(drop.parentId, drop.index));\n            if (m.canDrop()) {\n                if (cursor)\n                    tree.showCursor(cursor);\n            }\n            else {\n                tree.hideCursor();\n            }\n        },\n        drop: (_, m) => {\n            if (!m.canDrop())\n                return null;\n            let { parentId, index, dragIds } = tree.state.dnd;\n            safeRun(tree.props.onMove, {\n                dragIds,\n                parentId: parentId === ROOT_ID ? null : parentId,\n                index: index === null ? 0 : index, // When it's null it was dropped over a folder\n                dragNodes: tree.dragNodes,\n                parentNode: tree.get(parentId),\n            });\n            tree.open(parentId);\n        },\n    }), [node, el.current, tree.props]);\n    return dropRef;\n}\n"],"mappings":"AAAA,SAASA,OAAO,QAAQ,WAAW;AACnC,SAASC,UAAU,QAAQ,YAAY;AACvC,SAASC,WAAW,QAAQ,gBAAgB;AAC5C,SAASC,OAAO,IAAIC,GAAG,QAAQ,oBAAoB;AACnD,SAASC,OAAO,QAAQ,UAAU;AAClC,SAASC,OAAO,QAAQ,qBAAqB;AAC7C,OAAO,SAASC,WAAWA,CAACC,EAAE,EAAEC,IAAI,EAAE;EAClC,MAAMC,IAAI,GAAGT,UAAU,CAAC,CAAC;EACzB,MAAM,CAACU,CAAC,EAAEC,OAAO,CAAC,GAAGZ,OAAO,CAAC,OAAO;IAChCa,MAAM,EAAE,MAAM;IACdC,OAAO,EAAEA,CAAA,KAAMJ,IAAI,CAACI,OAAO,CAAC,CAAC;IAC7BC,KAAK,EAAEA,CAACC,KAAK,EAAEC,CAAC,KAAK;MACjB,MAAMC,MAAM,GAAGD,CAAC,CAACE,eAAe,CAAC,CAAC;MAClC,IAAI,CAACX,EAAE,CAACY,OAAO,IAAI,CAACF,MAAM,EACtB;MACJ,MAAM;QAAEG,MAAM;QAAEC;MAAK,CAAC,GAAGpB,WAAW,CAAC;QACjCqB,OAAO,EAAEf,EAAE,CAACY,OAAO;QACnBF,MAAM,EAAEA,MAAM;QACdM,MAAM,EAAEd,IAAI,CAACc,MAAM;QACnBf,IAAI,EAAEA,IAAI;QACVgB,QAAQ,EAAEhB,IAAI,CAACiB,IAAI;QACnBC,QAAQ,EAAElB,IAAI,CAACmB;MACnB,CAAC,CAAC;MACF,IAAIN,IAAI,EACJZ,IAAI,CAACmB,QAAQ,CAACzB,GAAG,CAAC0B,QAAQ,CAACR,IAAI,CAACS,QAAQ,EAAET,IAAI,CAACU,KAAK,CAAC,CAAC;MAC1D,IAAIf,CAAC,CAACH,OAAO,CAAC,CAAC,EAAE;QACb,IAAIO,MAAM,EACNX,IAAI,CAACuB,UAAU,CAACZ,MAAM,CAAC;MAC/B,CAAC,MACI;QACDX,IAAI,CAACwB,UAAU,CAAC,CAAC;MACrB;IACJ,CAAC;IACDZ,IAAI,EAAEA,CAACX,CAAC,EAAEM,CAAC,KAAK;MACZ,IAAI,CAACA,CAAC,CAACH,OAAO,CAAC,CAAC,EACZ,OAAO,IAAI;MACf,IAAI;QAAEiB,QAAQ;QAAEC,KAAK;QAAEG;MAAQ,CAAC,GAAGzB,IAAI,CAAC0B,KAAK,CAAChC,GAAG;MACjDC,OAAO,CAACK,IAAI,CAAC2B,KAAK,CAACC,MAAM,EAAE;QACvBH,OAAO;QACPJ,QAAQ,EAAEA,QAAQ,KAAKzB,OAAO,GAAG,IAAI,GAAGyB,QAAQ;QAChDC,KAAK,EAAEA,KAAK,KAAK,IAAI,GAAG,CAAC,GAAGA,KAAK;QAAE;QACnCO,SAAS,EAAE7B,IAAI,CAAC6B,SAAS;QACzBC,UAAU,EAAE9B,IAAI,CAAC+B,GAAG,CAACV,QAAQ;MACjC,CAAC,CAAC;MACFrB,IAAI,CAACgC,IAAI,CAACX,QAAQ,CAAC;IACvB;EACJ,CAAC,CAAC,EAAE,CAACtB,IAAI,EAAED,EAAE,CAACY,OAAO,EAAEV,IAAI,CAAC2B,KAAK,CAAC,CAAC;EACnC,OAAOzB,OAAO;AAClB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}