{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nimport * as utils from \"../utils\";\nimport { DefaultCursor } from \"../components/default-cursor\";\nimport { DefaultRow } from \"../components/default-row\";\nimport { DefaultNode } from \"../components/default-node\";\nimport { edit } from \"../state/edit-slice\";\nimport { focus, treeBlur } from \"../state/focus-slice\";\nimport { createRoot, ROOT_ID } from \"../data/create-root\";\nimport { actions as visibility } from \"../state/open-slice\";\nimport { actions as selection } from \"../state/selection-slice\";\nimport { actions as dnd } from \"../state/dnd-slice\";\nimport { DefaultDragPreview } from \"../components/default-drag-preview\";\nimport { DefaultContainer } from \"../components/default-container\";\nimport { createList } from \"../data/create-list\";\nimport { createIndex } from \"../data/create-index\";\nconst {\n  safeRun,\n  identify,\n  identifyNull\n} = utils;\nexport class TreeApi {\n  constructor(store, props, list, listEl) {\n    this.store = store;\n    this.props = props;\n    this.list = list;\n    this.listEl = listEl;\n    this.visibleStartIndex = 0;\n    this.visibleStopIndex = 0;\n    /* Changes here must also be made in update() */\n    this.root = createRoot(this);\n    this.visibleNodes = createList(this);\n    this.idToIndex = createIndex(this.visibleNodes);\n  }\n  /* Changes here must also be made in constructor() */\n  update(props) {\n    this.props = props;\n    this.root = createRoot(this);\n    this.visibleNodes = createList(this);\n    this.idToIndex = createIndex(this.visibleNodes);\n  }\n  /* Store helpers */\n  dispatch(action) {\n    return this.store.dispatch(action);\n  }\n  get state() {\n    return this.store.getState();\n  }\n  get openState() {\n    return this.state.nodes.open.unfiltered;\n  }\n  /* Tree Props */\n  get width() {\n    var _a;\n    return (_a = this.props.width) !== null && _a !== void 0 ? _a : 300;\n  }\n  get height() {\n    var _a;\n    return (_a = this.props.height) !== null && _a !== void 0 ? _a : 500;\n  }\n  get indent() {\n    var _a;\n    return (_a = this.props.indent) !== null && _a !== void 0 ? _a : 24;\n  }\n  get rowHeight() {\n    var _a;\n    return (_a = this.props.rowHeight) !== null && _a !== void 0 ? _a : 24;\n  }\n  get overscanCount() {\n    var _a;\n    return (_a = this.props.overscanCount) !== null && _a !== void 0 ? _a : 1;\n  }\n  get searchTerm() {\n    return (this.props.searchTerm || \"\").trim();\n  }\n  get matchFn() {\n    var _a;\n    const match = (_a = this.props.searchMatch) !== null && _a !== void 0 ? _a : (node, term) => {\n      const string = JSON.stringify(Object.values(node.data));\n      return string.toLocaleLowerCase().includes(term.toLocaleLowerCase());\n    };\n    return node => match(node, this.searchTerm);\n  }\n  accessChildren(data) {\n    var _a;\n    const get = this.props.childrenAccessor || \"children\";\n    return (_a = utils.access(data, get)) !== null && _a !== void 0 ? _a : null;\n  }\n  accessId(data) {\n    const get = this.props.idAccessor || \"id\";\n    const id = utils.access(data, get);\n    if (!id) throw new Error(\"Data must contain an 'id' property or props.idAccessor must return a string\");\n    return id;\n  }\n  /* Node Access */\n  get firstNode() {\n    var _a;\n    return (_a = this.visibleNodes[0]) !== null && _a !== void 0 ? _a : null;\n  }\n  get lastNode() {\n    var _a;\n    return (_a = this.visibleNodes[this.visibleNodes.length - 1]) !== null && _a !== void 0 ? _a : null;\n  }\n  get focusedNode() {\n    var _a;\n    return (_a = this.get(this.state.nodes.focus.id)) !== null && _a !== void 0 ? _a : null;\n  }\n  get mostRecentNode() {\n    var _a;\n    return (_a = this.get(this.state.nodes.selection.mostRecent)) !== null && _a !== void 0 ? _a : null;\n  }\n  get nextNode() {\n    const index = this.indexOf(this.focusedNode);\n    if (index === null) return null;else return this.at(index + 1);\n  }\n  get prevNode() {\n    const index = this.indexOf(this.focusedNode);\n    if (index === null) return null;else return this.at(index - 1);\n  }\n  get(id) {\n    if (!id) return null;\n    if (id in this.idToIndex) return this.visibleNodes[this.idToIndex[id]] || null;else return null;\n  }\n  at(index) {\n    return this.visibleNodes[index] || null;\n  }\n  nodesBetween(startId, endId) {\n    var _a;\n    if (startId === null || endId === null) return [];\n    const index1 = (_a = this.indexOf(startId)) !== null && _a !== void 0 ? _a : 0;\n    const index2 = this.indexOf(endId);\n    if (index2 === null) return [];\n    const start = Math.min(index1, index2);\n    const end = Math.max(index1, index2);\n    return this.visibleNodes.slice(start, end + 1);\n  }\n  indexOf(id) {\n    const key = utils.identifyNull(id);\n    if (!key) return null;\n    return this.idToIndex[key];\n  }\n  /* Data Operations */\n  get editingId() {\n    return this.state.nodes.edit.id;\n  }\n  createInternal() {\n    return this.create({\n      type: \"internal\"\n    });\n  }\n  createLeaf() {\n    return this.create({\n      type: \"leaf\"\n    });\n  }\n  create() {\n    return __awaiter(this, arguments, void 0, function* (opts = {}) {\n      var _a, _b;\n      const parentId = opts.parentId === undefined ? utils.getInsertParentId(this) : opts.parentId;\n      const index = (_a = opts.index) !== null && _a !== void 0 ? _a : utils.getInsertIndex(this);\n      const type = (_b = opts.type) !== null && _b !== void 0 ? _b : \"leaf\";\n      const data = yield safeRun(this.props.onCreate, {\n        type,\n        parentId,\n        index,\n        parentNode: this.get(parentId)\n      });\n      if (data) {\n        this.focus(data);\n        setTimeout(() => {\n          this.edit(data).then(() => {\n            this.select(data);\n            this.activate(data);\n          });\n        });\n      }\n    });\n  }\n  delete(node) {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (!node) return;\n      const idents = Array.isArray(node) ? node : [node];\n      const ids = idents.map(identify);\n      const nodes = ids.map(id => this.get(id)).filter(n => !!n);\n      yield safeRun(this.props.onDelete, {\n        nodes,\n        ids\n      });\n    });\n  }\n  edit(node) {\n    const id = identify(node);\n    this.resolveEdit({\n      cancelled: true\n    });\n    this.scrollTo(id);\n    this.dispatch(edit(id));\n    return new Promise(resolve => {\n      TreeApi.editPromise = resolve;\n    });\n  }\n  submit(identity, value) {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (!identity) return;\n      const id = identify(identity);\n      yield safeRun(this.props.onRename, {\n        id,\n        name: value,\n        node: this.get(id)\n      });\n      this.dispatch(edit(null));\n      this.resolveEdit({\n        cancelled: false,\n        value\n      });\n      setTimeout(() => this.onFocus()); // Return focus to element;\n    });\n  }\n  reset() {\n    this.dispatch(edit(null));\n    this.resolveEdit({\n      cancelled: true\n    });\n    setTimeout(() => this.onFocus()); // Return focus to element;\n  }\n  activate(id) {\n    const node = this.get(identifyNull(id));\n    if (!node) return;\n    safeRun(this.props.onActivate, node);\n  }\n  resolveEdit(value) {\n    const resolve = TreeApi.editPromise;\n    if (resolve) resolve(value);\n    TreeApi.editPromise = null;\n  }\n  /* Focus and Selection */\n  get selectedIds() {\n    return this.state.nodes.selection.ids;\n  }\n  get selectedNodes() {\n    let nodes = [];\n    for (let id of Array.from(this.selectedIds)) {\n      const node = this.get(id);\n      if (node) nodes.push(node);\n    }\n    return nodes;\n  }\n  focus(node, opts = {}) {\n    if (!node) return;\n    /* Focus is responsible for scrolling, while selection is\n     * responsible for focus. If selectionFollowsFocus, then\n     * just select it. */\n    if (this.props.selectionFollowsFocus) {\n      this.select(node);\n    } else {\n      this.dispatch(focus(identify(node)));\n      if (opts.scroll !== false) this.scrollTo(node);\n      if (this.focusedNode) safeRun(this.props.onFocus, this.focusedNode);\n    }\n  }\n  pageUp() {\n    var _a, _b;\n    const start = this.visibleStartIndex;\n    const stop = this.visibleStopIndex;\n    const page = stop - start;\n    let index = (_b = (_a = this.focusedNode) === null || _a === void 0 ? void 0 : _a.rowIndex) !== null && _b !== void 0 ? _b : 0;\n    if (index > start) {\n      index = start;\n    } else {\n      index = Math.max(start - page, 0);\n    }\n    this.focus(this.at(index));\n  }\n  pageDown() {\n    var _a, _b;\n    const start = this.visibleStartIndex;\n    const stop = this.visibleStopIndex;\n    const page = stop - start;\n    let index = (_b = (_a = this.focusedNode) === null || _a === void 0 ? void 0 : _a.rowIndex) !== null && _b !== void 0 ? _b : 0;\n    if (index < stop) {\n      index = stop;\n    } else {\n      index = Math.min(index + page, this.visibleNodes.length - 1);\n    }\n    this.focus(this.at(index));\n  }\n  select(node, opts = {}) {\n    if (!node) return;\n    const changeFocus = opts.focus !== false;\n    const id = identify(node);\n    if (changeFocus) this.dispatch(focus(id));\n    this.dispatch(selection.only(id));\n    this.dispatch(selection.anchor(id));\n    this.dispatch(selection.mostRecent(id));\n    this.scrollTo(id, opts.align);\n    if (this.focusedNode && changeFocus) {\n      safeRun(this.props.onFocus, this.focusedNode);\n    }\n    safeRun(this.props.onSelect, this.selectedNodes);\n  }\n  deselect(node) {\n    if (!node) return;\n    const id = identify(node);\n    this.dispatch(selection.remove(id));\n    safeRun(this.props.onSelect, this.selectedNodes);\n  }\n  selectMulti(identity) {\n    const node = this.get(identifyNull(identity));\n    if (!node) return;\n    this.dispatch(focus(node.id));\n    this.dispatch(selection.add(node.id));\n    this.dispatch(selection.anchor(node.id));\n    this.dispatch(selection.mostRecent(node.id));\n    this.scrollTo(node);\n    if (this.focusedNode) safeRun(this.props.onFocus, this.focusedNode);\n    safeRun(this.props.onSelect, this.selectedNodes);\n  }\n  selectContiguous(identity) {\n    if (!identity) return;\n    const id = identify(identity);\n    const {\n      anchor,\n      mostRecent\n    } = this.state.nodes.selection;\n    this.dispatch(focus(id));\n    this.dispatch(selection.remove(this.nodesBetween(anchor, mostRecent)));\n    this.dispatch(selection.add(this.nodesBetween(anchor, identifyNull(id))));\n    this.dispatch(selection.mostRecent(id));\n    this.scrollTo(id);\n    if (this.focusedNode) safeRun(this.props.onFocus, this.focusedNode);\n    safeRun(this.props.onSelect, this.selectedNodes);\n  }\n  deselectAll() {\n    this.setSelection({\n      ids: [],\n      anchor: null,\n      mostRecent: null\n    });\n    safeRun(this.props.onSelect, this.selectedNodes);\n  }\n  selectAll() {\n    var _a;\n    this.setSelection({\n      ids: Object.keys(this.idToIndex),\n      anchor: this.firstNode,\n      mostRecent: this.lastNode\n    });\n    this.dispatch(focus((_a = this.lastNode) === null || _a === void 0 ? void 0 : _a.id));\n    if (this.focusedNode) safeRun(this.props.onFocus, this.focusedNode);\n    safeRun(this.props.onSelect, this.selectedNodes);\n  }\n  setSelection(args) {\n    var _a;\n    const ids = new Set((_a = args.ids) === null || _a === void 0 ? void 0 : _a.map(identify));\n    const anchor = identifyNull(args.anchor);\n    const mostRecent = identifyNull(args.mostRecent);\n    this.dispatch(selection.set({\n      ids,\n      anchor,\n      mostRecent\n    }));\n    safeRun(this.props.onSelect, this.selectedNodes);\n  }\n  /* Drag and Drop */\n  get cursorParentId() {\n    const {\n      cursor\n    } = this.state.dnd;\n    switch (cursor.type) {\n      case \"highlight\":\n        return cursor.id;\n      default:\n        return null;\n    }\n  }\n  get cursorOverFolder() {\n    return this.state.dnd.cursor.type === \"highlight\";\n  }\n  get dragNodes() {\n    return this.state.dnd.dragIds.map(id => this.get(id)).filter(n => !!n);\n  }\n  get dragNode() {\n    return this.get(this.state.nodes.drag.id);\n  }\n  get dragDestinationParent() {\n    return this.get(this.state.nodes.drag.destinationParentId);\n  }\n  get dragDestinationIndex() {\n    return this.state.nodes.drag.destinationIndex;\n  }\n  canDrop() {\n    var _a;\n    if (this.isFiltered) return false;\n    const parentNode = (_a = this.get(this.state.dnd.parentId)) !== null && _a !== void 0 ? _a : this.root;\n    const dragNodes = this.dragNodes;\n    const isDisabled = this.props.disableDrop;\n    for (const drag of dragNodes) {\n      if (!drag) return false;\n      if (!parentNode) return false;\n      if (drag.isInternal && utils.isDescendant(parentNode, drag)) return false;\n    }\n    // Allow the user to insert their own logic\n    if (typeof isDisabled == \"function\") {\n      return !isDisabled({\n        parentNode,\n        dragNodes: this.dragNodes,\n        index: this.state.dnd.index || 0\n      });\n    } else if (typeof isDisabled == \"string\") {\n      // @ts-ignore\n      return !parentNode.data[isDisabled];\n    } else if (typeof isDisabled === \"boolean\") {\n      return !isDisabled;\n    } else {\n      return true;\n    }\n  }\n  hideCursor() {\n    this.dispatch(dnd.cursor({\n      type: \"none\"\n    }));\n  }\n  showCursor(cursor) {\n    this.dispatch(dnd.cursor(cursor));\n  }\n  /* Visibility */\n  open(identity) {\n    const id = identifyNull(identity);\n    if (!id) return;\n    if (this.isOpen(id)) return;\n    this.dispatch(visibility.open(id, this.isFiltered));\n    safeRun(this.props.onToggle, id);\n  }\n  close(identity) {\n    const id = identifyNull(identity);\n    if (!id) return;\n    if (!this.isOpen(id)) return;\n    this.dispatch(visibility.close(id, this.isFiltered));\n    safeRun(this.props.onToggle, id);\n  }\n  toggle(identity) {\n    const id = identifyNull(identity);\n    if (!id) return;\n    return this.isOpen(id) ? this.close(id) : this.open(id);\n  }\n  openParents(identity) {\n    const id = identifyNull(identity);\n    if (!id) return;\n    const node = utils.dfs(this.root, id);\n    let parent = node === null || node === void 0 ? void 0 : node.parent;\n    while (parent) {\n      this.open(parent.id);\n      parent = parent.parent;\n    }\n  }\n  openSiblings(node) {\n    const parent = node.parent;\n    if (!parent) {\n      this.toggle(node.id);\n    } else if (parent.children) {\n      const isOpen = node.isOpen;\n      for (let sibling of parent.children) {\n        if (sibling.isInternal) {\n          isOpen ? this.close(sibling.id) : this.open(sibling.id);\n        }\n      }\n      this.scrollTo(this.focusedNode);\n    }\n  }\n  openAll() {\n    utils.walk(this.root, node => {\n      if (node.isInternal) node.open();\n    });\n  }\n  closeAll() {\n    utils.walk(this.root, node => {\n      if (node.isInternal) node.close();\n    });\n  }\n  /* Scrolling */\n  scrollTo(identity, align = \"smart\") {\n    if (!identity) return;\n    const id = identify(identity);\n    this.openParents(id);\n    return utils.waitFor(() => id in this.idToIndex).then(() => {\n      var _a;\n      const index = this.idToIndex[id];\n      if (index === undefined) return;\n      (_a = this.list.current) === null || _a === void 0 ? void 0 : _a.scrollToItem(index, align);\n    }).catch(() => {\n      // Id: ${id} never appeared in the list.\n    });\n  }\n  /* State Checks */\n  get isEditing() {\n    return this.state.nodes.edit.id !== null;\n  }\n  get isFiltered() {\n    var _a;\n    return !!((_a = this.props.searchTerm) === null || _a === void 0 ? void 0 : _a.trim());\n  }\n  get hasFocus() {\n    return this.state.nodes.focus.treeFocused;\n  }\n  get hasNoSelection() {\n    return this.state.nodes.selection.ids.size === 0;\n  }\n  get hasOneSelection() {\n    return this.state.nodes.selection.ids.size === 1;\n  }\n  get hasMultipleSelections() {\n    return this.state.nodes.selection.ids.size > 1;\n  }\n  isSelected(id) {\n    if (!id) return false;\n    return this.state.nodes.selection.ids.has(id);\n  }\n  isOpen(id) {\n    var _a, _b, _c;\n    if (!id) return false;\n    if (id === ROOT_ID) return true;\n    const def = (_a = this.props.openByDefault) !== null && _a !== void 0 ? _a : true;\n    if (this.isFiltered) {\n      return (_b = this.state.nodes.open.filtered[id]) !== null && _b !== void 0 ? _b : true; // Filtered folders are always opened by default\n    } else {\n      return (_c = this.state.nodes.open.unfiltered[id]) !== null && _c !== void 0 ? _c : def;\n    }\n  }\n  isEditable(data) {\n    const check = this.props.disableEdit || (() => false);\n    return !utils.access(data, check);\n  }\n  isDraggable(data) {\n    const check = this.props.disableDrag || (() => false);\n    return !utils.access(data, check);\n  }\n  isDragging(node) {\n    const id = identifyNull(node);\n    if (!id) return false;\n    return this.state.nodes.drag.id === id;\n  }\n  isFocused(id) {\n    return this.hasFocus && this.state.nodes.focus.id === id;\n  }\n  isMatch(node) {\n    return this.matchFn(node);\n  }\n  willReceiveDrop(node) {\n    const id = identifyNull(node);\n    if (!id) return false;\n    const {\n      destinationParentId,\n      destinationIndex\n    } = this.state.nodes.drag;\n    return id === destinationParentId && destinationIndex === null;\n  }\n  /* Tree Event Handlers */\n  onFocus() {\n    const node = this.focusedNode || this.firstNode;\n    if (node) this.dispatch(focus(node.id));\n  }\n  onBlur() {\n    this.dispatch(treeBlur());\n  }\n  onItemsRendered(args) {\n    this.visibleStartIndex = args.visibleStartIndex;\n    this.visibleStopIndex = args.visibleStopIndex;\n  }\n  /* Get Renderers */\n  get renderContainer() {\n    return this.props.renderContainer || DefaultContainer;\n  }\n  get renderRow() {\n    return this.props.renderRow || DefaultRow;\n  }\n  get renderNode() {\n    return this.props.children || DefaultNode;\n  }\n  get renderDragPreview() {\n    return this.props.renderDragPreview || DefaultDragPreview;\n  }\n  get renderCursor() {\n    return this.props.renderCursor || DefaultCursor;\n  }\n}","map":{"version":3,"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","utils","DefaultCursor","DefaultRow","DefaultNode","edit","focus","treeBlur","createRoot","ROOT_ID","actions","visibility","selection","dnd","DefaultDragPreview","DefaultContainer","createList","createIndex","safeRun","identify","identifyNull","TreeApi","constructor","store","props","list","listEl","visibleStartIndex","visibleStopIndex","root","visibleNodes","idToIndex","update","dispatch","action","state","getState","openState","nodes","open","unfiltered","width","_a","height","indent","rowHeight","overscanCount","searchTerm","trim","matchFn","match","searchMatch","node","term","string","JSON","stringify","Object","values","data","toLocaleLowerCase","includes","accessChildren","get","childrenAccessor","access","accessId","idAccessor","id","Error","firstNode","lastNode","length","focusedNode","mostRecentNode","mostRecent","nextNode","index","indexOf","at","prevNode","nodesBetween","startId","endId","index1","index2","start","Math","min","end","max","slice","key","editingId","createInternal","create","type","createLeaf","arguments","opts","_b","parentId","undefined","getInsertParentId","getInsertIndex","onCreate","parentNode","setTimeout","select","activate","delete","idents","Array","isArray","ids","map","filter","n","onDelete","resolveEdit","cancelled","scrollTo","editPromise","submit","identity","onRename","name","onFocus","reset","onActivate","selectedIds","selectedNodes","from","push","selectionFollowsFocus","scroll","pageUp","stop","page","rowIndex","pageDown","changeFocus","only","anchor","align","onSelect","deselect","remove","selectMulti","add","selectContiguous","deselectAll","setSelection","selectAll","keys","args","Set","set","cursorParentId","cursor","cursorOverFolder","dragNodes","dragIds","dragNode","drag","dragDestinationParent","destinationParentId","dragDestinationIndex","destinationIndex","canDrop","isFiltered","isDisabled","disableDrop","isInternal","isDescendant","hideCursor","showCursor","isOpen","onToggle","close","toggle","openParents","dfs","parent","openSiblings","children","sibling","openAll","walk","closeAll","waitFor","current","scrollToItem","catch","isEditing","hasFocus","treeFocused","hasNoSelection","size","hasOneSelection","hasMultipleSelections","isSelected","has","_c","def","openByDefault","filtered","isEditable","check","disableEdit","isDraggable","disableDrag","isDragging","isFocused","isMatch","willReceiveDrop","onBlur","onItemsRendered","renderContainer","renderRow","renderNode","renderDragPreview","renderCursor"],"sources":["/Users/yuri/GitHub/ECL_Website/root/seminar/client/node_modules/react-arborist/dist/module/interfaces/tree-api.js"],"sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as utils from \"../utils\";\nimport { DefaultCursor } from \"../components/default-cursor\";\nimport { DefaultRow } from \"../components/default-row\";\nimport { DefaultNode } from \"../components/default-node\";\nimport { edit } from \"../state/edit-slice\";\nimport { focus, treeBlur } from \"../state/focus-slice\";\nimport { createRoot, ROOT_ID } from \"../data/create-root\";\nimport { actions as visibility } from \"../state/open-slice\";\nimport { actions as selection } from \"../state/selection-slice\";\nimport { actions as dnd } from \"../state/dnd-slice\";\nimport { DefaultDragPreview } from \"../components/default-drag-preview\";\nimport { DefaultContainer } from \"../components/default-container\";\nimport { createList } from \"../data/create-list\";\nimport { createIndex } from \"../data/create-index\";\nconst { safeRun, identify, identifyNull } = utils;\nexport class TreeApi {\n    constructor(store, props, list, listEl) {\n        this.store = store;\n        this.props = props;\n        this.list = list;\n        this.listEl = listEl;\n        this.visibleStartIndex = 0;\n        this.visibleStopIndex = 0;\n        /* Changes here must also be made in update() */\n        this.root = createRoot(this);\n        this.visibleNodes = createList(this);\n        this.idToIndex = createIndex(this.visibleNodes);\n    }\n    /* Changes here must also be made in constructor() */\n    update(props) {\n        this.props = props;\n        this.root = createRoot(this);\n        this.visibleNodes = createList(this);\n        this.idToIndex = createIndex(this.visibleNodes);\n    }\n    /* Store helpers */\n    dispatch(action) {\n        return this.store.dispatch(action);\n    }\n    get state() {\n        return this.store.getState();\n    }\n    get openState() {\n        return this.state.nodes.open.unfiltered;\n    }\n    /* Tree Props */\n    get width() {\n        var _a;\n        return (_a = this.props.width) !== null && _a !== void 0 ? _a : 300;\n    }\n    get height() {\n        var _a;\n        return (_a = this.props.height) !== null && _a !== void 0 ? _a : 500;\n    }\n    get indent() {\n        var _a;\n        return (_a = this.props.indent) !== null && _a !== void 0 ? _a : 24;\n    }\n    get rowHeight() {\n        var _a;\n        return (_a = this.props.rowHeight) !== null && _a !== void 0 ? _a : 24;\n    }\n    get overscanCount() {\n        var _a;\n        return (_a = this.props.overscanCount) !== null && _a !== void 0 ? _a : 1;\n    }\n    get searchTerm() {\n        return (this.props.searchTerm || \"\").trim();\n    }\n    get matchFn() {\n        var _a;\n        const match = (_a = this.props.searchMatch) !== null && _a !== void 0 ? _a : ((node, term) => {\n            const string = JSON.stringify(Object.values(node.data));\n            return string.toLocaleLowerCase().includes(term.toLocaleLowerCase());\n        });\n        return (node) => match(node, this.searchTerm);\n    }\n    accessChildren(data) {\n        var _a;\n        const get = this.props.childrenAccessor || \"children\";\n        return (_a = utils.access(data, get)) !== null && _a !== void 0 ? _a : null;\n    }\n    accessId(data) {\n        const get = this.props.idAccessor || \"id\";\n        const id = utils.access(data, get);\n        if (!id)\n            throw new Error(\"Data must contain an 'id' property or props.idAccessor must return a string\");\n        return id;\n    }\n    /* Node Access */\n    get firstNode() {\n        var _a;\n        return (_a = this.visibleNodes[0]) !== null && _a !== void 0 ? _a : null;\n    }\n    get lastNode() {\n        var _a;\n        return (_a = this.visibleNodes[this.visibleNodes.length - 1]) !== null && _a !== void 0 ? _a : null;\n    }\n    get focusedNode() {\n        var _a;\n        return (_a = this.get(this.state.nodes.focus.id)) !== null && _a !== void 0 ? _a : null;\n    }\n    get mostRecentNode() {\n        var _a;\n        return (_a = this.get(this.state.nodes.selection.mostRecent)) !== null && _a !== void 0 ? _a : null;\n    }\n    get nextNode() {\n        const index = this.indexOf(this.focusedNode);\n        if (index === null)\n            return null;\n        else\n            return this.at(index + 1);\n    }\n    get prevNode() {\n        const index = this.indexOf(this.focusedNode);\n        if (index === null)\n            return null;\n        else\n            return this.at(index - 1);\n    }\n    get(id) {\n        if (!id)\n            return null;\n        if (id in this.idToIndex)\n            return this.visibleNodes[this.idToIndex[id]] || null;\n        else\n            return null;\n    }\n    at(index) {\n        return this.visibleNodes[index] || null;\n    }\n    nodesBetween(startId, endId) {\n        var _a;\n        if (startId === null || endId === null)\n            return [];\n        const index1 = (_a = this.indexOf(startId)) !== null && _a !== void 0 ? _a : 0;\n        const index2 = this.indexOf(endId);\n        if (index2 === null)\n            return [];\n        const start = Math.min(index1, index2);\n        const end = Math.max(index1, index2);\n        return this.visibleNodes.slice(start, end + 1);\n    }\n    indexOf(id) {\n        const key = utils.identifyNull(id);\n        if (!key)\n            return null;\n        return this.idToIndex[key];\n    }\n    /* Data Operations */\n    get editingId() {\n        return this.state.nodes.edit.id;\n    }\n    createInternal() {\n        return this.create({ type: \"internal\" });\n    }\n    createLeaf() {\n        return this.create({ type: \"leaf\" });\n    }\n    create() {\n        return __awaiter(this, arguments, void 0, function* (opts = {}) {\n            var _a, _b;\n            const parentId = opts.parentId === undefined\n                ? utils.getInsertParentId(this)\n                : opts.parentId;\n            const index = (_a = opts.index) !== null && _a !== void 0 ? _a : utils.getInsertIndex(this);\n            const type = (_b = opts.type) !== null && _b !== void 0 ? _b : \"leaf\";\n            const data = yield safeRun(this.props.onCreate, {\n                type,\n                parentId,\n                index,\n                parentNode: this.get(parentId),\n            });\n            if (data) {\n                this.focus(data);\n                setTimeout(() => {\n                    this.edit(data).then(() => {\n                        this.select(data);\n                        this.activate(data);\n                    });\n                });\n            }\n        });\n    }\n    delete(node) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!node)\n                return;\n            const idents = Array.isArray(node) ? node : [node];\n            const ids = idents.map(identify);\n            const nodes = ids.map((id) => this.get(id)).filter((n) => !!n);\n            yield safeRun(this.props.onDelete, { nodes, ids });\n        });\n    }\n    edit(node) {\n        const id = identify(node);\n        this.resolveEdit({ cancelled: true });\n        this.scrollTo(id);\n        this.dispatch(edit(id));\n        return new Promise((resolve) => {\n            TreeApi.editPromise = resolve;\n        });\n    }\n    submit(identity, value) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!identity)\n                return;\n            const id = identify(identity);\n            yield safeRun(this.props.onRename, {\n                id,\n                name: value,\n                node: this.get(id),\n            });\n            this.dispatch(edit(null));\n            this.resolveEdit({ cancelled: false, value });\n            setTimeout(() => this.onFocus()); // Return focus to element;\n        });\n    }\n    reset() {\n        this.dispatch(edit(null));\n        this.resolveEdit({ cancelled: true });\n        setTimeout(() => this.onFocus()); // Return focus to element;\n    }\n    activate(id) {\n        const node = this.get(identifyNull(id));\n        if (!node)\n            return;\n        safeRun(this.props.onActivate, node);\n    }\n    resolveEdit(value) {\n        const resolve = TreeApi.editPromise;\n        if (resolve)\n            resolve(value);\n        TreeApi.editPromise = null;\n    }\n    /* Focus and Selection */\n    get selectedIds() {\n        return this.state.nodes.selection.ids;\n    }\n    get selectedNodes() {\n        let nodes = [];\n        for (let id of Array.from(this.selectedIds)) {\n            const node = this.get(id);\n            if (node)\n                nodes.push(node);\n        }\n        return nodes;\n    }\n    focus(node, opts = {}) {\n        if (!node)\n            return;\n        /* Focus is responsible for scrolling, while selection is\n         * responsible for focus. If selectionFollowsFocus, then\n         * just select it. */\n        if (this.props.selectionFollowsFocus) {\n            this.select(node);\n        }\n        else {\n            this.dispatch(focus(identify(node)));\n            if (opts.scroll !== false)\n                this.scrollTo(node);\n            if (this.focusedNode)\n                safeRun(this.props.onFocus, this.focusedNode);\n        }\n    }\n    pageUp() {\n        var _a, _b;\n        const start = this.visibleStartIndex;\n        const stop = this.visibleStopIndex;\n        const page = stop - start;\n        let index = (_b = (_a = this.focusedNode) === null || _a === void 0 ? void 0 : _a.rowIndex) !== null && _b !== void 0 ? _b : 0;\n        if (index > start) {\n            index = start;\n        }\n        else {\n            index = Math.max(start - page, 0);\n        }\n        this.focus(this.at(index));\n    }\n    pageDown() {\n        var _a, _b;\n        const start = this.visibleStartIndex;\n        const stop = this.visibleStopIndex;\n        const page = stop - start;\n        let index = (_b = (_a = this.focusedNode) === null || _a === void 0 ? void 0 : _a.rowIndex) !== null && _b !== void 0 ? _b : 0;\n        if (index < stop) {\n            index = stop;\n        }\n        else {\n            index = Math.min(index + page, this.visibleNodes.length - 1);\n        }\n        this.focus(this.at(index));\n    }\n    select(node, opts = {}) {\n        if (!node)\n            return;\n        const changeFocus = opts.focus !== false;\n        const id = identify(node);\n        if (changeFocus)\n            this.dispatch(focus(id));\n        this.dispatch(selection.only(id));\n        this.dispatch(selection.anchor(id));\n        this.dispatch(selection.mostRecent(id));\n        this.scrollTo(id, opts.align);\n        if (this.focusedNode && changeFocus) {\n            safeRun(this.props.onFocus, this.focusedNode);\n        }\n        safeRun(this.props.onSelect, this.selectedNodes);\n    }\n    deselect(node) {\n        if (!node)\n            return;\n        const id = identify(node);\n        this.dispatch(selection.remove(id));\n        safeRun(this.props.onSelect, this.selectedNodes);\n    }\n    selectMulti(identity) {\n        const node = this.get(identifyNull(identity));\n        if (!node)\n            return;\n        this.dispatch(focus(node.id));\n        this.dispatch(selection.add(node.id));\n        this.dispatch(selection.anchor(node.id));\n        this.dispatch(selection.mostRecent(node.id));\n        this.scrollTo(node);\n        if (this.focusedNode)\n            safeRun(this.props.onFocus, this.focusedNode);\n        safeRun(this.props.onSelect, this.selectedNodes);\n    }\n    selectContiguous(identity) {\n        if (!identity)\n            return;\n        const id = identify(identity);\n        const { anchor, mostRecent } = this.state.nodes.selection;\n        this.dispatch(focus(id));\n        this.dispatch(selection.remove(this.nodesBetween(anchor, mostRecent)));\n        this.dispatch(selection.add(this.nodesBetween(anchor, identifyNull(id))));\n        this.dispatch(selection.mostRecent(id));\n        this.scrollTo(id);\n        if (this.focusedNode)\n            safeRun(this.props.onFocus, this.focusedNode);\n        safeRun(this.props.onSelect, this.selectedNodes);\n    }\n    deselectAll() {\n        this.setSelection({ ids: [], anchor: null, mostRecent: null });\n        safeRun(this.props.onSelect, this.selectedNodes);\n    }\n    selectAll() {\n        var _a;\n        this.setSelection({\n            ids: Object.keys(this.idToIndex),\n            anchor: this.firstNode,\n            mostRecent: this.lastNode,\n        });\n        this.dispatch(focus((_a = this.lastNode) === null || _a === void 0 ? void 0 : _a.id));\n        if (this.focusedNode)\n            safeRun(this.props.onFocus, this.focusedNode);\n        safeRun(this.props.onSelect, this.selectedNodes);\n    }\n    setSelection(args) {\n        var _a;\n        const ids = new Set((_a = args.ids) === null || _a === void 0 ? void 0 : _a.map(identify));\n        const anchor = identifyNull(args.anchor);\n        const mostRecent = identifyNull(args.mostRecent);\n        this.dispatch(selection.set({ ids, anchor, mostRecent }));\n        safeRun(this.props.onSelect, this.selectedNodes);\n    }\n    /* Drag and Drop */\n    get cursorParentId() {\n        const { cursor } = this.state.dnd;\n        switch (cursor.type) {\n            case \"highlight\":\n                return cursor.id;\n            default:\n                return null;\n        }\n    }\n    get cursorOverFolder() {\n        return this.state.dnd.cursor.type === \"highlight\";\n    }\n    get dragNodes() {\n        return this.state.dnd.dragIds\n            .map((id) => this.get(id))\n            .filter((n) => !!n);\n    }\n    get dragNode() {\n        return this.get(this.state.nodes.drag.id);\n    }\n    get dragDestinationParent() {\n        return this.get(this.state.nodes.drag.destinationParentId);\n    }\n    get dragDestinationIndex() {\n        return this.state.nodes.drag.destinationIndex;\n    }\n    canDrop() {\n        var _a;\n        if (this.isFiltered)\n            return false;\n        const parentNode = (_a = this.get(this.state.dnd.parentId)) !== null && _a !== void 0 ? _a : this.root;\n        const dragNodes = this.dragNodes;\n        const isDisabled = this.props.disableDrop;\n        for (const drag of dragNodes) {\n            if (!drag)\n                return false;\n            if (!parentNode)\n                return false;\n            if (drag.isInternal && utils.isDescendant(parentNode, drag))\n                return false;\n        }\n        // Allow the user to insert their own logic\n        if (typeof isDisabled == \"function\") {\n            return !isDisabled({\n                parentNode,\n                dragNodes: this.dragNodes,\n                index: this.state.dnd.index || 0,\n            });\n        }\n        else if (typeof isDisabled == \"string\") {\n            // @ts-ignore\n            return !parentNode.data[isDisabled];\n        }\n        else if (typeof isDisabled === \"boolean\") {\n            return !isDisabled;\n        }\n        else {\n            return true;\n        }\n    }\n    hideCursor() {\n        this.dispatch(dnd.cursor({ type: \"none\" }));\n    }\n    showCursor(cursor) {\n        this.dispatch(dnd.cursor(cursor));\n    }\n    /* Visibility */\n    open(identity) {\n        const id = identifyNull(identity);\n        if (!id)\n            return;\n        if (this.isOpen(id))\n            return;\n        this.dispatch(visibility.open(id, this.isFiltered));\n        safeRun(this.props.onToggle, id);\n    }\n    close(identity) {\n        const id = identifyNull(identity);\n        if (!id)\n            return;\n        if (!this.isOpen(id))\n            return;\n        this.dispatch(visibility.close(id, this.isFiltered));\n        safeRun(this.props.onToggle, id);\n    }\n    toggle(identity) {\n        const id = identifyNull(identity);\n        if (!id)\n            return;\n        return this.isOpen(id) ? this.close(id) : this.open(id);\n    }\n    openParents(identity) {\n        const id = identifyNull(identity);\n        if (!id)\n            return;\n        const node = utils.dfs(this.root, id);\n        let parent = node === null || node === void 0 ? void 0 : node.parent;\n        while (parent) {\n            this.open(parent.id);\n            parent = parent.parent;\n        }\n    }\n    openSiblings(node) {\n        const parent = node.parent;\n        if (!parent) {\n            this.toggle(node.id);\n        }\n        else if (parent.children) {\n            const isOpen = node.isOpen;\n            for (let sibling of parent.children) {\n                if (sibling.isInternal) {\n                    isOpen ? this.close(sibling.id) : this.open(sibling.id);\n                }\n            }\n            this.scrollTo(this.focusedNode);\n        }\n    }\n    openAll() {\n        utils.walk(this.root, (node) => {\n            if (node.isInternal)\n                node.open();\n        });\n    }\n    closeAll() {\n        utils.walk(this.root, (node) => {\n            if (node.isInternal)\n                node.close();\n        });\n    }\n    /* Scrolling */\n    scrollTo(identity, align = \"smart\") {\n        if (!identity)\n            return;\n        const id = identify(identity);\n        this.openParents(id);\n        return utils\n            .waitFor(() => id in this.idToIndex)\n            .then(() => {\n            var _a;\n            const index = this.idToIndex[id];\n            if (index === undefined)\n                return;\n            (_a = this.list.current) === null || _a === void 0 ? void 0 : _a.scrollToItem(index, align);\n        })\n            .catch(() => {\n            // Id: ${id} never appeared in the list.\n        });\n    }\n    /* State Checks */\n    get isEditing() {\n        return this.state.nodes.edit.id !== null;\n    }\n    get isFiltered() {\n        var _a;\n        return !!((_a = this.props.searchTerm) === null || _a === void 0 ? void 0 : _a.trim());\n    }\n    get hasFocus() {\n        return this.state.nodes.focus.treeFocused;\n    }\n    get hasNoSelection() {\n        return this.state.nodes.selection.ids.size === 0;\n    }\n    get hasOneSelection() {\n        return this.state.nodes.selection.ids.size === 1;\n    }\n    get hasMultipleSelections() {\n        return this.state.nodes.selection.ids.size > 1;\n    }\n    isSelected(id) {\n        if (!id)\n            return false;\n        return this.state.nodes.selection.ids.has(id);\n    }\n    isOpen(id) {\n        var _a, _b, _c;\n        if (!id)\n            return false;\n        if (id === ROOT_ID)\n            return true;\n        const def = (_a = this.props.openByDefault) !== null && _a !== void 0 ? _a : true;\n        if (this.isFiltered) {\n            return (_b = this.state.nodes.open.filtered[id]) !== null && _b !== void 0 ? _b : true; // Filtered folders are always opened by default\n        }\n        else {\n            return (_c = this.state.nodes.open.unfiltered[id]) !== null && _c !== void 0 ? _c : def;\n        }\n    }\n    isEditable(data) {\n        const check = this.props.disableEdit || (() => false);\n        return !utils.access(data, check);\n    }\n    isDraggable(data) {\n        const check = this.props.disableDrag || (() => false);\n        return !utils.access(data, check);\n    }\n    isDragging(node) {\n        const id = identifyNull(node);\n        if (!id)\n            return false;\n        return this.state.nodes.drag.id === id;\n    }\n    isFocused(id) {\n        return this.hasFocus && this.state.nodes.focus.id === id;\n    }\n    isMatch(node) {\n        return this.matchFn(node);\n    }\n    willReceiveDrop(node) {\n        const id = identifyNull(node);\n        if (!id)\n            return false;\n        const { destinationParentId, destinationIndex } = this.state.nodes.drag;\n        return id === destinationParentId && destinationIndex === null;\n    }\n    /* Tree Event Handlers */\n    onFocus() {\n        const node = this.focusedNode || this.firstNode;\n        if (node)\n            this.dispatch(focus(node.id));\n    }\n    onBlur() {\n        this.dispatch(treeBlur());\n    }\n    onItemsRendered(args) {\n        this.visibleStartIndex = args.visibleStartIndex;\n        this.visibleStopIndex = args.visibleStopIndex;\n    }\n    /* Get Renderers */\n    get renderContainer() {\n        return this.props.renderContainer || DefaultContainer;\n    }\n    get renderRow() {\n        return this.props.renderRow || DefaultRow;\n    }\n    get renderNode() {\n        return this.props.children || DefaultNode;\n    }\n    get renderDragPreview() {\n        return this.props.renderDragPreview || DefaultDragPreview;\n    }\n    get renderCursor() {\n        return this.props.renderCursor || DefaultCursor;\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}